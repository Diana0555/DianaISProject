<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mini App | RHOSLC Logic Translator</title>

  <style>
    :root{
      --bg:#f6f3ff;
      --card:#ffffff;
      --text:#111827;
      --muted:#6b7280;
      --accent:#6d28d9;
      --accent2:#16a34a;
      --danger:#ef4444;
      --border:rgba(0,0,0,.10);
      --shadow:0 10px 30px rgba(0,0,0,.08);
      --radius:18px;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.35;
    }
    .wrap{
      max-width: 980px;
      margin: 0 auto;
      padding: 20px 16px 70px;
    }
    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding: 14px 16px;
      background: rgba(255,255,255,.85);
      backdrop-filter: blur(10px);
      border: 1px solid var(--border);
      border-radius: 14px;
      position: sticky;
      top: 12px;
      z-index: 10;
    }
    .topbar a{
      text-decoration:none;
      color: var(--accent);
      font-weight: 900;
    }
    .pill{
      display:inline-block;
      font-size: 12px;
      font-weight: 900;
      color: #fff;
      background: var(--accent);
      padding: 6px 10px;
      border-radius: 999px;
      letter-spacing:.2px;
    }

    .grid{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap: 16px;
      margin-top: 16px;
    }
    @media (max-width: 900px){
      .grid{ grid-template-columns: 1fr; }
    }

    .card{
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 18px;
    }

    h1{ margin:0 0 6px; font-size: 28px; letter-spacing:.2px; }
    h2{ margin:0 0 6px; font-size: 18px; }
    .sub{ margin:0; color: var(--muted); }

    label{
      display:block;
      font-size: 12px;
      font-weight: 900;
      color: var(--muted);
      margin: 14px 0 6px;
      letter-spacing:.4px;
      text-transform: uppercase;
    }

    textarea{
      width: 100%;
      min-height: 110px;
      padding: 12px;
      border: 1px solid var(--border);
      border-radius: 14px;
      outline: none;
      font-size: 15px;
      resize: vertical;
    }
    textarea:focus{
      border-color: rgba(109,40,217,.55);
      box-shadow: 0 0 0 4px rgba(109,40,217,.12);
    }

    .row{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-top: 12px;
    }
    @media (max-width: 520px){
      .row{ grid-template-columns: 1fr; }
    }

    select, input[type="range"]{
      width: 100%;
      padding: 10px 12px;
      border: 1px solid var(--border);
      border-radius: 12px;
      font-size: 15px;
      outline: none;
      background: #fff;
    }

    .btns{
      display:flex;
      gap:10px;
      flex-wrap: wrap;
      margin-top: 14px;
      align-items:center;
    }
    button{
      border: 1px solid var(--border);
      background: #fff;
      border-radius: 12px;
      padding: 10px 12px;
      font-weight: 900;
      cursor:pointer;
      transition: transform .05s ease;
    }
    button:hover{ transform: translateY(-1px); }

    .primary{
      background: var(--accent);
      color:#fff;
      border-color: transparent;
    }
    .good{
      background: var(--accent2);
      color:#fff;
      border-color: transparent;
    }
    .danger{
      background: var(--danger);
      color:#fff;
      border-color: transparent;
    }

    .output{
      margin-top: 14px;
      border-radius: 16px;
      padding: 14px;
      background: rgba(0,0,0,.04);
      border: 1px dashed rgba(0,0,0,.15);
    }
    .outLabel{
      font-size: 12px;
      font-weight: 900;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: .6px;
      margin-bottom: 8px;
    }
    .outText{
      font-size: 16px;
      font-weight: 800;
      margin:0;
    }

    .toast{
      margin-top: 10px;
      font-size: 13px;
      font-weight: 800;
      color: var(--muted);
      min-height: 18px;
    }

    .history{
      margin-top: 12px;
      border-top: 1px solid rgba(0,0,0,.08);
      padding-top: 12px;
    }
    .chip{
      display:block;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid rgba(0,0,0,.10);
      background:#fff;
      margin-top: 10px;
    }
    .chip .small{
      font-size: 12px;
      color: var(--muted);
      font-weight: 900;
      letter-spacing: .4px;
      text-transform: uppercase;
    }
    .chip .big{
      margin-top: 6px;
      font-weight: 900;
    }
    .fineprint{
      font-size: 12px;
      color: var(--muted);
      margin-top: 12px;
    }
    .k{
      font-weight: 900;
      color: var(--text);
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="topbar">
      <a href="scratch.html">← Back to Scratch</a>
      <span class="pill">Part 3 Mini App</span>
    </div>

    <div class="grid">
      <div class="card">
        <h1>RHOSLC Logic Translator</h1>
        <p class="sub">Type a sentence someone would say in an argument, then translate it into “Housewives Logic” (parody-style, PG).</p>

        <label for="inputText">What they said</label>
        <textarea id="inputText" placeholder="Example: “I didn’t mean it like that.”"></textarea>

        <div class="row">
          <div>
            <label for="tone">Translation tone</label>
            <select id="tone">
              <option value="shady" selected>Shady</option>
              <option value="sweet">Sweet-but-still-a-read</option>
              <option value="chaotic">Chaotic</option>
            </select>
          </div>
          <div>
            <label for="drama">Drama level: <span class="k" id="dramaVal">6</span>/10</label>
            <input id="drama" type="range" min="1" max="10" value="6" />
          </div>
        </div>

        <div class="btns">
          <button class="primary" id="translateBtn">Translate</button>
          <button id="randomBtn">Use Example</button>
          <button class="good" id="copyBtn">Copy</button>
          <button class="danger" id="clearBtn">Clear</button>
        </div>

        <div class="output" id="outputBox" aria-live="polite">
          <div class="outLabel">Translation</div>
          <p class="outText" id="outputText">Your translation will appear here.</p>
          <div class="toast" id="toast"></div>
        </div>

        <p class="fineprint">Note: This is an original parody “translator” for a class project—no direct show quotes.</p>
      </div>

      <div class="card">
        <h2>How it works</h2>
        <p class="sub">Uses text patterns + random “confessional” phrases to rewrite what you type. Includes tone, drama slider, copy button, and history.</p>

        <div class="history">
          <div class="outLabel">Recent translations</div>
          <div id="historyList"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const inputEl = document.getElementById("inputText");
    const toneEl = document.getElementById("tone");
    const dramaEl = document.getElementById("drama");
    const dramaValEl = document.getElementById("dramaVal");
    const outEl = document.getElementById("outputText");
    const toastEl = document.getElementById("toast");
    const historyList = document.getElementById("historyList");

    const examples = [
      "I didn’t mean it like that.",
      "I’m just being honest.",
      "I never said that.",
      "You’re taking it the wrong way.",
      "I’m not mad.",
      "I’m over it.",
      "I was trying to help you.",
      "I don’t do drama."
    ];

    // Pattern-based translations (original, PG)
    const patterns = [
      { re: /i didn'?t mean it like that/i, base: "I absolutely meant it, I’m just adjusting the wording now." },
      { re: /i'?m just being honest/i, base: "I’m choosing violence, but calling it ‘honesty’ for the vibe." },
      { re: /i never said that/i, base: "I said it… but I’m hoping the room forgot." },
      { re: /you'?re taking it the wrong way/i, base: "I said exactly what I said, and I’m blaming your feelings." },
      { re: /i'?m not mad/i, base: "I’m mad, but I’m pretending I’m not because it looks better on camera." },
      { re: /i'?m over it/i, base: "I’m not over it. I’m about to bring it up again… later." },
      { re: /i was trying to help you/i, base: "I delivered a critique and labeled it as ‘help’ to avoid accountability." },
      { re: /i don'?t do drama/i, base: "I do drama professionally—I just don’t want credit right now." }
    ];

    const confessionalOpeners = {
      shady: [
        "In my opinion,", "Let’s be real:", "Honestly,", "Here’s what’s funny:",
        "No because actually,"
      ],
      sweet: [
        "With love,", "Respectfully,", "Gently speaking,", "Trying to be kind:",
        "I’m saying this nicely:"
      ],
      chaotic: [
        "Plot twist:", "Breaking news:", "In the name of chaos,", "Buckle up:",
        "So anyway—"
      ]
    };

    const endings = {
      shady: [
        "And that’s why I’m not apologizing first.",
        "Now I’m waiting for the group chat to explode.",
        "I said it with my whole chest.",
        "This is not my problem to fix."
      ],
      sweet: [
        "I hope that makes sense, truly.",
        "I want peace… but also clarity.",
        "I’m rooting for us, in theory.",
        "I’m open to moving forward, slowly."
      ],
      chaotic: [
        "Cue dramatic music and a sudden exit.",
        "Somebody bring snacks—this is going to be a season.",
        "And yes, I brought imaginary receipts.",
        "Now we’re having a meeting about the meeting."
      ]
    };

    const spice = [
      "Respectfully.", "Don’t make me repeat myself.", "I’m being calm.", "It’s giving delusion.",
      "I’m not explaining this twice.", "I have a timestamp in my head.", "That’s not what happened.",
      "Let’s not rewrite history."
    ];

    let history = [];

    function pick(arr){ return arr[Math.floor(Math.random() * arr.length)]; }

    function clamp(n,min,max){ return Math.max(min, Math.min(max,n)); }

    function translateText(raw, tone, drama){
      const text = (raw || "").trim();
      if(!text) return "Type something first and I’ll translate it.";

      // Try a pattern match first
      let base = null;
      for(const p of patterns){
        if(p.re.test(text)){ base = p.base; break; }
      }

      // If no match, do a generic translation that still feels “Housewives logic”
      if(!base){
        base = `I’m going to reframe “${text}” in a way that benefits me.`;
      }

      const opener = pick(confessionalOpeners[tone]);
      const ending = pick(endings[tone]);

      // Add extra “spice” based on drama slider
      const spiceCount = clamp(Math.floor((Number(drama) - 1) / 3), 0, 3);
      let spiceBits = [];
      for(let i=0;i<spiceCount;i++) spiceBits.push(pick(spice));
      const extra = spiceBits.length ? (" " + spiceBits.join(" ")) : "";

      return `${opener} ${base}${extra} ${ending}`;
    }

    function renderHistory(){
      historyList.innerHTML = "";
      history.slice(0,4).forEach(h => {
        const div = document.createElement("div");
        div.className = "chip";
        div.innerHTML = `
          <div class="small">You said</div>
          <div class="big">${escapeHtml(h.input)}</div>
          <div class="small" style="margin-top:10px;">Translated</div>
          <div class="big">${escapeHtml(h.output)}</div>
        `;
        historyList.appendChild(div);
      });
    }

    function escapeHtml(str){
      return String(str)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    function setToast(msg){
      toastEl.textContent = msg || "";
      if(msg) setTimeout(()=> toastEl.textContent = "", 1400);
    }

    function doTranslate(){
      const tone = toneEl.value;
      const drama = dramaEl.value;
      const input = inputEl.value;

      const output = translateText(input, tone, drama);
      outEl.textContent = output;

      history.unshift({ input: input.trim() || "(blank)", output });
      history = history.slice(0, 6);
      renderHistory();
      setToast("");
    }

    async function copyOutput(){
      const text = outEl.textContent.trim();
      if(!text || text.includes("appear here")) return;

      try{
        await navigator.clipboard.writeText(text);
        setToast("Copied ✅");
      }catch(e){
        setToast("Copy blocked—highlight + copy manually.");
      }
    }

    function useExample(){
      inputEl.value = pick(examples);
      inputEl.focus();
      doTranslate();
    }

    function clearAll(){
      inputEl.value = "";
      outEl.textContent = "Your translation will appear here.";
      history = [];
      renderHistory();
      setToast("Cleared.");
      inputEl.focus();
    }

    dramaEl.addEventListener("input", () => dramaValEl.textContent = dramaEl.value);
    document.getElementById("translateBtn").addEventListener("click", doTranslate);
    document.getElementById("randomBtn").addEventListener("click", useExample);
    document.getElementById("copyBtn").addEventListener("click", copyOutput);
    document.getElementById("clearBtn").addEventListener("click", clearAll);

    inputEl.addEventListener("keydown", (e) => {
      if(e.key === "Enter" && (e.ctrlKey || e.metaKey)){
        doTranslate(); // Ctrl/Cmd+Enter to translate
      }
    });

    // Initialize
    dramaValEl.textContent = dramaEl.value;
    useExample();
  </script>
</body>
</html>
